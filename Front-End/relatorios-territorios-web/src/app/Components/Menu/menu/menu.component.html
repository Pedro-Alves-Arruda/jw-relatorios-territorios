<div class="pos-f-t">
    <nav class="navbar navbar bg menu">
        <div style="display: flex; align-items: center; justify-content: center; height: 122%;">
            <a href="/"> <img src="assets/imagens/logo_sistema.png"></a>
            <div>
                <a class="btn btn-secondary dropdown-toggle no-caret menu-item" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Campo
                </a>
                <ul class="dropdown-menu ml-2">
                    <li><a class="dropdown-item" href="revisita-cadastro">Cadastrar Revisita</a></li>
                    <li><a class="dropdown-item" href="revisita-listar">Lista de Revisitas</a></li>
                    <li><a class="dropdown-item" href="campo/cronometro">Cronômetro</a></li>
                </ul>
            </div>
            <div>
                <a class="btn btn-secondary dropdown-toggle no-caret menu-item" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Cadastro
                </a>
                <ul class="dropdown-menu ml-5">
                    <li><a class="dropdown-item" href="publicador-cadastro">Cadastrar Publicador</a></li>
                </ul>
            </div>
        </div>
        <div style="display: flex; align-items: center; justify-content: center; height: 122%;">
            <h4>JW Relatorios e Revisitas</h4>
           <mat-icon class="notification" data-toggle="modal" data-target="#modalNotificacao" style="cursor: pointer;">notifications</mat-icon><div style="color: white;display: flex;align-items: baseline;justify-content: center;font-size: 11px;height: 37px;" >{{countNotificacoes}}</div>
            <mat-icon (click)="redireciona()" style="cursor: pointer;">person</mat-icon>
            <mat-icon (click)="logout()" style="cursor: pointer;">logout</mat-icon>
        </div>
    </nav>
</div>

<div class="container" *ngIf="mostraGraficos">
    <div class="graficos">
        <div class="sub-container-um">
            <div echarts [options]="pieChartOptions" class="demo-chart"></div>
        </div> 
        <div class="sub-container-dois">
            <div echarts [options]="lineChartOptions" class="demo-chart"></div>
        </div>
    </div>
    <div class="tabela">
        <h3 class="title" style="padding: 10px; display: flex; justify-content: center; align-items: center;">Lista de Revisitas</h3>
        <hr>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <ng-container matColumnDef="Nome">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td mat-cell *matCellDef="let item"> {{item.nome}} </td>
            </ng-container>

            <ng-container matColumnDef="Descricao">
                <th mat-header-cell *matHeaderCellDef> Descrição </th>
                <td mat-cell *matCellDef="let item"> {{item.descricao}} </td>
            </ng-container>

            <ng-container matColumnDef="created_at">
                <th mat-header-cell *matHeaderCellDef> Ultima Visita </th>
                <td mat-cell *matCellDef="let item"> {{formataDataHora(item.created_at)}} </td>
            </ng-container>

            <ng-container matColumnDef="Rua">
                <th mat-header-cell *matHeaderCellDef> Rua </th>
                <td mat-cell *matCellDef="let item"> {{item.rua}} </td>
            </ng-container>

            <ng-container matColumnDef="Bairro">
                <th mat-header-cell *matHeaderCellDef> Bairro </th>
                <td mat-cell *matCellDef="let item"> {{item.bairro}} </td>
            </ng-container>

            <ng-container matColumnDef="Numero">
                <th mat-header-cell *matHeaderCellDef> Numero </th>
                <td mat-cell *matCellDef="let item"> {{item.numero}} </td>
            </ng-container>

            <ng-container matColumnDef="Cidade">
                <th mat-header-cell *matHeaderCellDef> Cidade </th>
                <td mat-cell *matCellDef="let item"> {{item.cidade}} </td>
            </ng-container>

            <ng-container matColumnDef="Estado">
                <th mat-header-cell *matHeaderCellDef> Estado </th>
                <td mat-cell *matCellDef="let item"> {{item.estado}} </td>
            </ng-container>

            <ng-container matColumnDef="CEP">
                <th mat-header-cell *matHeaderCellDef> CEP </th>
                <td mat-cell *matCellDef="let item"> {{item.cep}} </td>
            </ng-container>

            <ng-container matColumnDef="Telefone">
                <th mat-header-cell *matHeaderCellDef> Telefone </th>
                <td mat-cell *matCellDef="let item"> {{item.telefone}} </td>
            </ng-container>
            <!-- Header e conteúdo -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <!-- Paginador -->
        <mat-paginator [pageSize]="3" [pageSizeOptions]="[3, 6, 10]" showFirstLastButtons></mat-paginator>

    </div>
    </div>


<div class="modal" tabindex="-1" role="dialog" id="modalNotificacao">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" >Notificações</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <div [class]="notificacao.id"  *ngFor="let notificacao of notificacoes" [style]="notificacao.lida==false? 'background-color: lightgrey; border-radius: 8px;cursor:pointer;':'background-color: white; border-radius: 8px;cursor:pointer;'">
                    <p style="font-size: 15px;padding: 6px;">{{formataDataHora(notificacao.createdAt)}}</p>
                    <p style="font-size: 15px;cursor: pointer;padding: 7px;" (click)="marcarComoLida(notificacao)">{{notificacao.message}}</p>
                    <hr>
                </div>
            </div>
            <div class="modal-footer">
            </div>
          </div>
        </div>
    </div>




<router-outlet></router-outlet>